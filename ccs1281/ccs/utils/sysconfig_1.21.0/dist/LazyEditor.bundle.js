(self.webpackChunksysconfig=self.webpackChunksysconfig||[]).push([[39],{20481:(e,t,i)=>{"use strict";const s=i(96486),r=i(26565),o=i(72419),d=i(10),n=i(20532),p=i(3249),h=i(11594),a=i(67294);class l extends a.Component{constructor(){super(...arguments),this.scrollAfterRender=!1,this.reSizeEditor=()=>{const e=(0,n.getHeight)();this.standardEditorNode.style.height=e-((0,o.isCCS)()?60:8.5*h.defaultFontSize)+"px",this.diffEditorNode.style.height=e-((0,o.isCCS)()?60:8.5*h.defaultFontSize)+"px"},this.scrollToFirstDifference=()=>{if(0!==this.props.diffType){const e=s.first(this.diffEditor.getLineChanges());e&&this.diffEditor.revealLineInCenterIfOutsideViewport(s.min([e.modifiedStartLineNumber,e.originalStartLineNumber]))}}}render(){this.scrollAfterRender&&(this.scrollAfterRender=!1,setTimeout((()=>{this.scrollToFirstDifference()}),0));const{hasError:e,diffType:t}=this.props;return a.createElement("div",null,a.createElement("div",{ref:e=>this.standardEditorNode=e,id:"editor",style:e||0!==t?{display:"none"}:{}}),a.createElement("div",{ref:e=>this.diffEditorNode=e,id:"diff_editor",style:e||0===t?{display:"none"}:{}}))}componentDidMount(){const e=this.getFileType();this.pastModel=r.editor.createModel("",e),this.presentModel=r.editor.createModel("",e),this.diffEditor=r.editor.createDiffEditor(this.diffEditorNode,{automaticLayout:!0,readOnly:!0,lineNumbers:(0,o.isUnderTest)()?"off":"on",renderSideBySide:2===this.props.diffType,fontSize:h.defaultFontSize}),this.diffEditor.setModel({original:this.pastModel,modified:this.presentModel}),this.subscription=this.diffEditor.onDidUpdateDiff(this.scrollToFirstDifference),r.editor.defineTheme("darkTheme",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":p.tiGrey[800],"editor.lineHighlightBackground":"#4D4D4F"}}),r.editor.defineTheme("lightTheme",{base:"vs",inherit:!0,rules:[],colors:{}}),"dark"===this.props.theme.name?r.editor.setTheme("darkTheme"):"light"===this.props.theme.name?r.editor.setTheme("lightTheme"):(0,d.assertUnreachable)(this.props.theme.name),this.standardEditor=r.editor.create(this.standardEditorNode,{automaticLayout:!0,readOnly:!0,model:this.presentModel,lineNumbers:(0,o.isUnderTest)()?"off":"on",minimap:{enabled:!1},fontSize:h.defaultFontSize}),this.setEditorValue(),this.reSizeEditor(),window.addEventListener("resize",this.reSizeEditor)}componentWillUnmount(){this.subscription.dispose(),this.standardEditor.dispose(),this.diffEditor.dispose(),this.pastModel.dispose(),this.presentModel.dispose(),window.removeEventListener("resize",this.reSizeEditor)}componentDidUpdate(e){if(this.propsChanged(e)&&(this.setEditorValue(),this.props.diffType!==e.diffType)){const t={renderSideBySide:2===this.props.diffType};this.diffEditor.updateOptions(t),0===e.diffType&&(this.scrollAfterRender=!0)}}propsChanged(e){return!s.isEqual(this.props,e)}setEditorValue(){!this.props.hasError&&this.props.currentContent&&(this.props.previousContent!==this.pastModel.getValue()&&this.pastModel.setValue(this.props.previousContent),this.props.currentContent!==this.presentModel.getValue()&&this.presentModel.setValue(this.props.currentContent))}getFileType(){switch(this.props.file.name.split(".").pop().toLowerCase()){case"js":case"xs":case"syscfg":return"javascript";case"json":return"json";case"c":case"h":return"c";case"cpp":case"hpp":return"cpp";default:return"plaintext"}}}e.exports=l},26041:e=>{e.exports="undefined"==typeof ti_testing_originalPromise?Promise:ti_testing_originalPromise}}]);
//# sourceMappingURL=LazyEditor.bundle.js.map