<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Software Architecture &mdash; 
SimpleLink™ CC2640R2 SDK
User&#39;s Guide for BLE-Stack 3.x.x
 3.03.09.00 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developing with CCS" href="developing_in_ccs.html" />
    <link rel="prev" title="Hardware Architecture" href="hardware_architecture.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug cc2640 ble-software-architecture";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../ble-stack-3.x-guide/index.html" class="icon icon-home"> 
SimpleLink™ CC2640R2 SDK
User's Guide for BLE-Stack 3.x.x

          </a>
              <div class="version">
                3.03.09.00
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/get-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ble-stack-3.x-guide/platform.html">The CC2640R2 SDK Platform</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hardware_architecture.html">Hardware Architecture</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Software Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#stack-protocol-stack-and-application-configurations">BLE-Stack Protocol Stack and Application Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solution-platform">Solution Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ble-software-architecture">BLE Software Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#protocol-stack-build-configurations">Protocol Stack Build Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#stack-library-configuration-stack-library">Stack Library Configuration (<code class="docutils literal notranslate"><span class="pre">_stack_library</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#covert-library-build-to-split-image">Covert Library Build to Split Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#split-image-configuration">Split Image Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#project-build-configurations">Project Build Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#standard-project-task-hierarchy">Standard Project Task Hierarchy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure">Directory Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#examples-folder">Examples Folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-folder">Source Folder</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#working-with-hex-and-binary-files">Working With Hex and Binary Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="developing_in_ccs.html">Developing with CCS</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_in_iar.html">Developing with IAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="ble-build.html">Opening, Configuring and Building Projects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/tirtos-index.html">TI-RTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html">Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#ble-stack">BLE-Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#developing-a-custom-application">Developing a Custom Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#ble-network-processor">BLE Network Processor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/ble-stack-3-index.html#running-the-sdk-on-custom-hardware">Running the SDK on Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/u-stack-index.html">Micro BLE Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-common/npi-index.html">Network Processor Interface (NPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/index-oad-cc2640.html">Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../voice/voice.html">Creating a Voice Enabled Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/secure-fw-index.html">Secure Firmware (SFW)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensor-controller/sensor-controller.html">Sensor Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/migration.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/api-reference.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-3.x-guide/reference.html">Terms and Definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../ble-stack-3.x-guide/index.html">
SimpleLink™ CC2640R2 SDK
User's Guide for BLE-Stack 3.x.x
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../ble-stack-3.x-guide/index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../ble-stack-3.x-guide/platform.html">The CC2640R2 SDK Platform</a> &raquo;</li>
      <li>Software Architecture</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="software-architecture">
<h1>Software Architecture<a class="headerlink" href="#software-architecture" title="Permalink to this headline">¶</a></h1>
<p>The TI royalty-free Bluetooth Low Energy software development kit (SDK) is a
complete software platform for developing single-mode Bluetooth Low Energy
applications. This kit is based on the SimpleLink CC2640R2, complete
System-on-Chip (SoC) Bluetooth Low Energy solution. The CC2640R2 combines a
2.4-GHz RF transceiver, 128-KB in-system programmable memory, 20KB of SRAM, and
a full range of peripherals. The device is centered on an Arm®
Cortex®-M3 series processor that handles the application layer and
Bluetooth Low Energy protocol stack and an autonomous radio core centered on an
Arm Cortex®-M0 processor that handles all the low-level radio control
and processing associated with the physical layer and parts of the link layer.
The Sensor Controller block provides additional flexibility by allowing
autonomous data acquisition and control independent of the Cortex-M3 processor,
further extending the low-power capabilities of the CC2640R2. For more
information about the CC2640R2, see the <a class="reference external" href="http://www.ti.com/lit/pdf/swcu117">CC13x0 CC26x0 SimpleLink Wireless MCU Technical Reference Manual</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Sensor Controller is not available on the <a class="reference external" href="https://www.ti.com/product/CC2640R2L">CC2640R2L</a>.</p>
</div>
<div class="section" id="stack-protocol-stack-and-application-configurations">
<h2>BLE-Stack Protocol Stack and Application Configurations<a class="headerlink" href="#stack-protocol-stack-and-application-configurations" title="Permalink to this headline">¶</a></h2>
<p>Above the RF driver is the TI Bluetooth Low Energy protocol stack, which is
implemented in library code.</p>
<p>The application developer interfaces with the protocol stack through a set of APIs
(ICall) to implement a Bluetooth Low Energy application. The rest of this
document intends to document application development on the CC2640R2 using the
Bluetooth Low Energy stack.</p>
<p><a class="reference internal" href="#fig-device-configurations"><span class="std std-numref">Figure 6.</span></a> shows the platform that supports two
different protocol stack and application configurations.</p>
<ul class="simple">
<li><p><strong>Single device:</strong> The controller, host, profiles, and application are all
implemented on the CC2640R2 as a true single-chip solution. This
configuration is the simplest and most common when using the CC2640R2. This
configuration is used by most of TI’s sample projects. This configuration is
the most cost-effective technique and provides the lowest-power performance.</p></li>
<li><p><strong>Simple network processor:</strong> The Simple Network Processor (<a class="reference internal" href="../ble-stack-3.x-guide/reference.html#term-SNP"><span class="xref std std-term">SNP</span></a>)
implements the controller and host layers of the BLE-Stack. Additionally,
the SNP exposes an interface for scheduling communication between the stack
and an external MCU. This accelerates dual MCU designs because the
application processor (<a class="reference internal" href="../ble-stack-3.x-guide/reference.html#term-8"><span class="xref std std-term">AP</span></a>) is only responsible for managing custom
profiles and application code. Stack-related functionality, such as
security, is implemented on the SNP. The SNP currently supports the
peripheral and broadcaster GAP roles. Communication with the SNP is carried
out through the SNP API. The SNP API is built on the Unified Network
Processor Interface (<a class="reference internal" href="../ble-stack-3.x-guide/reference.html#term-12"><span class="xref std std-term">UNPI</span></a>), which supports UART and SPI transport
layers. For more information, reference the
<a class="reference internal" href="../ble-stack-common/npi-index.html#npi-unified"><span class="std std-ref">Unified NPI</span></a>. TI also provides the SAP library, which implements a
UNPI master and the SNP API. The SAP library can be ported to any
TI-RTOS-capable processor, or used as a reference for developing a custom
dual MCU solution. For a description of the SNP, see the README.html page
within the simple_np folder, advanced users can read the
<a class="reference external" href="../../doxygen/group___s_n_p.html">SNP API Reference</a> for a summary of the supported
commands.</p></li>
</ul>
<div class="figure align-center" id="id4">
<span id="fig-device-configurations"></span><a class="reference internal image-reference" href="../_images/image7.jpeg"><img alt="../_images/image7.jpeg" src="../_images/image7.jpeg" style="width: 75%;" /></a>
<p class="caption"><span class="caption-number">Figure 6. </span><span class="caption-text">Single-Device Processor and Simple Network Processor Configurations</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="solution-platform">
<h2>Solution Platform<a class="headerlink" href="#solution-platform" title="Permalink to this headline">¶</a></h2>
<p>This section describes the various components that are installed with
BLE-Stack 3.03.09.00 and the directory structure of the protocol stack
and any tools required for development.
<a class="reference internal" href="#fig-single-network-processor-configuration"><span class="std std-numref">Figure 7.</span></a> shows the BLE-Stack
development system.</p>
<div class="figure align-center" id="id5">
<span id="fig-single-network-processor-configuration"></span><img alt="../_images/image8.jpeg" src="../_images/image8.jpeg" />
<p class="caption"><span class="caption-number">Figure 7. </span><span class="caption-text">Bluetooth Low Energy Stack Development System</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>The solution platform includes the following components:</p>
<ul class="simple">
<li><p><strong>TI’s Real-Time Operating System (TI-RTOS)</strong> with the TI-RTOS kernel,
optimized power management support, and peripheral drivers (SPI, UART, and
so forth)</p></li>
<li><p><strong>CC26xxware DriverLib</strong> provides a register abstraction layer and is used
by software and drivers to control the CC2640R2 SoC.</p></li>
<li><p><strong>The Bluetooth Low Energy protocol stack</strong> is provided in library form with
parts of the protocol stack in the CC2640R2 ROM.</p></li>
<li><p><strong>Sample applications and profiles</strong> make starting development using both
proprietary and generic solutions easier.</p></li>
</ul>
<p>The following integrated development environments (IDEs) are
supported:</p>
<ul class="simple">
<li><p>IAR Embedded Workbench for Arm</p></li>
<li><p>Code Composer Studio™ (CCS)</p></li>
</ul>
<p>Refer to the SDK release notes for the specific IDE versions supported by this
release.</p>
</div>
<div class="section" id="ble-software-architecture">
<h2>BLE Software Architecture<a class="headerlink" href="#ble-software-architecture" title="Permalink to this headline">¶</a></h2>
<p>The CC2640R2 Bluetooth Low Energy software environment consists of the
following parts:</p>
<ul class="simple">
<li><p>An application image with the TI-RTOS kernel, drivers and Bluetooth profile</p></li>
<li><p>A stack image or library that implements Bluetooth Low Energy protocol</p></li>
</ul>
<p>TI-RTOS is a real-time, pre-emptive, multithreaded operating system that
runs the software solution with task synchronization. Both the application and
Bluetooth Low Energy protocol stack exist as separate tasks within the RTOS. The
Bluetooth Low Energy protocol stack has the highest priority. A messaging
framework called indirect call (ICall) is used for thread-safe synchronization
between the application and stack. <a class="reference internal" href="#fig-examples-software-architecture"><span class="std std-numref">Figure 8.</span></a>
shows the architecture.</p>
<div class="figure align-center" id="id6">
<span id="fig-examples-software-architecture"></span><img alt="../_images/image43.jpeg" src="../_images/image43.jpeg" />
<p class="caption"><span class="caption-number">Figure 8. </span><span class="caption-text">Example Software Architecture</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<ul class="simple">
<li><p>The stack image includes the lower layers of the Bluetooth Low Energy
protocol stack from the LL up to and including the GAP and GATT layers. Most
of the Bluetooth Low Energy protocol stack code is provided as a library.</p></li>
<li><p>The application image includes the RTOS, profiles, application code,
drivers, and the ICall module.</p></li>
</ul>
</div>
<div class="section" id="protocol-stack-build-configurations">
<span id="sec-supported-stack-image-types"></span><h2>Protocol Stack Build Configurations<a class="headerlink" href="#protocol-stack-build-configurations" title="Permalink to this headline">¶</a></h2>
<p>The BLE-Stack applications have different options for configuring the protocol
stack to maximize system implementations. These options are described below
along with the relevant advantages and limitations.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section aims to explain the two supported protocol stack build
configurations. Additionally, the protocol stack itself may be configured
to conditionally pull in different library builds based on the features
needed. Configuring the protocol stack is covered in
<a class="reference internal" href="../ble-stack-3.x/stack-configuration.html#stack-features-configuration"><span class="std std-ref">Stack Configurations</span></a></p>
</div>
<div class="section" id="stack-library-configuration-stack-library">
<span id="sec-inc-architecture-stack-image-as-a-library"></span><h3>Stack Library Configuration (<code class="docutils literal notranslate"><span class="pre">_stack_library</span></code>)<a class="headerlink" href="#stack-library-configuration-stack-library" title="Permalink to this headline">¶</a></h3>
<p>In BLE-Stack 3.03.09.00, stack can be built as a library that can be statically linked
to the application. Projects with build with this new configuration can be
identified by project build configurations with <code class="docutils literal notranslate"><span class="pre">_stack_library</span></code> in its
configuration name. Using this build configuration will yield additional flash
footprint optimizations by the linker since the application and stack can share
contiguous flash pages. The gained footprint savings will however prevent
<strong>split-image</strong> application. See
<a class="reference internal" href="ble-build.html#tbl-inc-developing-in-ccs-build-configs"><span class="std std-ref">Available CCS project build configurations</span></a> and
<a class="reference internal" href="ble-build.html#tbl-inc-developing-in-iar-build-configs"><span class="std std-ref">Available IAR project build configurations</span></a> for the available project build
configurations. Stack library projects have the following properties</p>
<blockquote>
<div><ul class="simple">
<li><p>Stack project generates a static library (.lib)</p></li>
<li><p>Application project will now link the stack in as a library</p></li>
<li><p>There is no explicit app/stack boundary. The application’s link step
decides the memory locations of the code within the stack_library. There
are some exceptions to this such as <a class="reference internal" href="../ble-stack-3.x-guide/reference.html#term-0"><span class="xref std std-term">SNV</span></a>.</p></li>
<li><p>This architecture saves flash by allowing the linker work more efficiently.</p></li>
<li><p>These projects used the improved ICall architecture</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="covert-library-build-to-split-image">
<h3>Covert Library Build to Split Image<a class="headerlink" href="#covert-library-build-to-split-image" title="Permalink to this headline">¶</a></h3>
<p>To covert the Stack_library build projects into split image, please visit <cite>Task 2-Add OAD
to Multi Role</cite> in BLE Enhanced OAD section in
<strong>SimpleLink Academy</strong> <a class="reference external" href="http://ti.com/simplelinkacademy">www.ti.com/simplelinkacademy</a></p>
</div>
<div class="section" id="split-image-configuration">
<span id="sec-inc-architecture-split-image-configuration"></span><h3>Split Image Configuration<a class="headerlink" href="#split-image-configuration" title="Permalink to this headline">¶</a></h3>
<p>As with previous BLE-Stack releases, application and stack images are
built as two separate projects that generate two separate images.
These images occupy separate, non-overlapping flash memory pages. The split image
configuration is useful in purposes such as  <a class="reference internal" href="../ble-stack-3.x-guide/reference.html#term-6"><span class="xref std std-term">OAD</span></a> where it could
be advantageous to perform independent application or stack downloads. Split
image projects have the following properties:</p>
<blockquote>
<div><ul class="simple">
<li><p>Fixed stack entry point</p></li>
<li><p>Stack project generates a separate executable (.hex, .out, .bin)</p></li>
<li><p>Explicit Flash/RAM boundaries between app and stack</p></li>
<li><p>Independent update of stack/app (API compatibility must be ensured by the
user)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="project-build-configurations">
<h3>Project Build Configurations<a class="headerlink" href="#project-build-configurations" title="Permalink to this headline">¶</a></h3>
<p>Sample applications within the BLE-Stack portion of the <a class="reference external" href="http://www.ti.com/tool/SIMPLELINK-CC2640R2-SDK">SimpleLink CC2640R2 SDK</a> support multiple
build configurations to enable using the protocol stack build types discussed
above. Other build configurations may have been created to support features such
as RCOSC or OAD out of the box.
The table below gives a summary of the build configurations found within
BLE-Stack and their compatibility with one another.</p>
<span id="id3"></span><table class="docutils align-default" id="id7">
<caption><span class="caption-number">Table 2. </span><span class="caption-text">Available project build configurations.</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 22%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Project
type</p></td>
<td><p>Project’s
build configuration</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td rowspan="4"><p>Application</p></td>
<td><p>FlashROM</p></td>
<td><p>Application image build configuration. Requires companion Stack FlashROM (split image
configuration)</p></td>
</tr>
<tr class="row-odd"><td><p>FlashROM_StackLibrary</p></td>
<td><p>Application build configuration linked to Stack library (fully executable)</p></td>
</tr>
<tr class="row-even"><td><p>FlashROM_StackLibrary_RCOSC</p></td>
<td><p>Application build configuration linked to Stack library for 32-kHz crystal-less device
configuration</p></td>
</tr>
<tr class="row-odd"><td><p>FlashROM_OAD_Offchip</p></td>
<td><p>OAD off-chip application FlashROM configuration</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Stack</p></td>
<td><p>FlashROM_Library</p></td>
<td><p>Stack library build configuration</p></td>
</tr>
<tr class="row-odd"><td><p>FlashROM</p></td>
<td><p>Stack
image using protocol stack in ROM configuration</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of the build configurations above may be located in a separate
project for CCS, for example <code class="docutils literal notranslate"><span class="pre">simple_peripheral_cc2640r2lp_app_oad_offchip</span></code>.
However the principles of the table above can still be applied. Always
consult the <code class="docutils literal notranslate"><span class="pre">README.html</span></code> file of the specific sample application for
more information on it’s supported build configurations. Additionally,
refer to <a class="reference internal" href="ble-build.html#tbl-inc-developing-in-ccs-build-configs"><span class="std std-ref">Available CCS project build configurations</span></a></p>
</div>
</div>
<div class="section" id="standard-project-task-hierarchy">
<span id="sec-inc-architecture-standard-project-task-hierarchy"></span><h3>Standard Project Task Hierarchy<a class="headerlink" href="#standard-project-task-hierarchy" title="Permalink to this headline">¶</a></h3>
<p>Considering the simple_peripheral project as an example, these tasks are listed
by priority. A higher task number corresponds to a higher priority task:</p>
<ul class="simple">
<li><p>Priority 5: Bluetooth Low Energy protocol stack task (must be highest priority)</p></li>
<li><p>Priority 1: Application task (simple_peripheral)</p></li>
</ul>
<p><a class="reference internal" href="../ble-stack-3.x-guide/tirtos-index.html#sec-tirtos-overview"><span class="std std-ref">TI-RTOS (RTOS Kernel) Overview</span></a> introduces TI-RTOS tasks.
<a class="reference internal" href="../ble-stack-3.x/overview.html#sec-ble-stack-overview"><span class="std std-ref">Overview</span></a> describes interfacing with the Bluetooth low
energy protocol stack. <a class="reference internal" href="../ble-stack-3.x/the-application.html#start-up-in-main"><span class="std std-ref">Main initialization</span></a> describes the application task.</p>
</div>
</div>
<div class="section" id="directory-structure">
<h2>Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h2>
<p>The default install location is: <em>C:\ti\simplelink_cc2640r2_sdk_x_xx_xx_xx</em>.</p>
<p>The SDK installs to this location by default. For the purposes of this document,
consider the above path to the BLE-Stack root directory; it will be omitted.
All paths will be relative to the BLE-Stack root directory. Opening up the root
install directory shows the new parent folders within the SDK, as shown in
<a class="reference internal" href="#tbl-root-folder"><span class="std std-numref">Table 3.</span></a></p>
<span id="tbl-root-folder"></span><table class="docutils align-default" id="id8">
<caption><span class="caption-number">Table 3. </span><span class="caption-text">SDK root folders</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 38%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>BLE-Stack    3.03.09.00 folders</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>docs\</p></td>
<td><p>The docs directory now contains all relevant
documents included with the CC2640R2 SDK.
Refer to the Documentation Overview master page.</p></td>
</tr>
<tr class="row-odd"><td><p>examples\</p></td>
<td><p>The CC2640R2 SDK includes ble examples as well as
TI-RTOS kernel and TI-RTOS driver examples.</p></td>
</tr>
<tr class="row-even"><td><p>kernel\</p></td>
<td><p>The TI-RTOS kernel is now included with the
CC2640R2 SDK.</p></td>
</tr>
<tr class="row-odd"><td><p>source\</p></td>
<td><p>The source\ directory include source for
BLE-Stack, TI-RTOS kernel and drivers, and various
middleware modules.</p></td>
</tr>
<tr class="row-even"><td><p>tools\</p></td>
<td><p>Tools such as BTool</p></td>
</tr>
</tbody>
</table>
<div class="section" id="examples-folder">
<h3>Examples Folder<a class="headerlink" href="#examples-folder" title="Permalink to this headline">¶</a></h3>
<p>The examples\ folder contains example source files for the BLE-Stack, TI-RTOS
kernel, and TI-RTOS drivers. All the source code supporting the <a class="reference external" href="http://www.ti.com/tool/SIMPLELINK-CC2640R2-SDK">SimpleLink CC2640R2 SDK</a> examples
can be found at *examples\rtos\CC2640R2_LAUNCHXL\. Examples for each
product can be found within their respective folders and are accessible via
various means as shown in <a class="reference internal" href="#tbl-sdk-examples"><span class="std std-ref">Examples available for the CC2640R2 platform</span></a>.</p>
<span id="tbl-sdk-examples"></span><table class="docutils align-default" id="id9">
<caption><span class="caption-number">Table 4. </span><span class="caption-text">Examples available for the CC2640R2 platform</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 21%" />
<col style="width: 26%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type of examples</p></th>
<th class="head"><p>Example subdirectory</p></th>
<th class="head"><p>How to open the examples</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BLE-Stack</p></td>
<td><p>ble5stack\</p></td>
<td><div class="line-block">
<div class="line">Imported via TI Resource Explorer</div>
<div class="line">Opened as existing IAR projects</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>TI-RTOS Kernel</p></td>
<td><p>sysbios\</p></td>
<td><div class="line-block">
<div class="line">Imported via TI Resource Explorer</div>
<div class="line">See the Quick Start Guide</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>TI-RTOS Drivers</p></td>
<td><p>drivers\</p></td>
<td><div class="line-block">
<div class="line">Imported via TI Resource Explorer</div>
<div class="line">See the Quick Start Guide</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>For TI-RTOS Kernel and TI-RTOS driver examples, see the linked documentation.
To help select a specific BLE example, see <a class="reference internal" href="../ble-stack-3.x-guide/get-started.html#tbl-sdk-ble-examples"><span class="std std-ref">BLE examples available for the CC2640R2 platform</span></a>. As with
previous BLE-Stack releases, each example contains a toolchain subdirectory for
CCS and IAR.</p>
<p>IAR examples are available as .eww projects whereas CCS project are imported.</p>
<p>See <a class="reference internal" href="../ble-stack-3.x-guide/get-started.html#tbl-sdk-ble-examples"><span class="std std-numref">Table 1.</span></a> for a list of examples supported by the SDK.</p>
</div>
<div class="section" id="source-folder">
<h3>Source Folder<a class="headerlink" href="#source-folder" title="Permalink to this headline">¶</a></h3>
<p>The source\ti\ folder contains libraries and source files for the BLE-Stack,
TI-RTOS drivers, and various shared modules. They can be found within their
respective folders as shown in <a class="reference internal" href="#tbl-sdk-source"><span class="std std-ref">CC2640R2 SDK’s source\ti\ directory</span></a>.</p>
<span id="tbl-sdk-source"></span><table class="docutils align-default" id="id10">
<caption><span class="caption-number">Table 5. </span><span class="caption-text">CC2640R2 SDK’s source\ti\ directory</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 21%" />
<col style="width: 26%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>source\ti\</p></th>
<th class="head"><p>subdirectory</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><p>ble5stack\</p></td>
<td><p>Root source directory for the BLE-Stack</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>blelib\</p></td>
<td><p>Prebuilt BLE stack libraries</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>boards\</p></td>
<td><p>Sample board files for use with the BLE
stacks</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>common\</p></td>
<td><p>Linker, RTOS config, and middleware used by
the stack</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>config\</p></td>
<td><p>Symbol files for various stack builds and
configurations</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>controller\</p></td>
<td><p>Header files for the BLE controller layer</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>hal\</p></td>
<td><p>Hardware abstraction layer files for Stack</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>heapmgr\</p></td>
<td><p>Heap Manager</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>host\</p></td>
<td><p>Header files for the BLE host layers</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>icall\</p></td>
<td><p>Source files for the ICall module</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>inc\</p></td>
<td><p>Header files used to interface with
BLE-Stack</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>npi\</p></td>
<td><p>Source files for the both NPI modules</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>osal\</p></td>
<td><p>Source support files used by the BLE-Stack</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>profiles\</p></td>
<td><p>Sample BLE profile implementations</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>rom\</p></td>
<td><p>BLE-Stack ROM symbol files</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>services\</p></td>
<td><p>Miscellaneous support files</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>symbols\</p></td>
<td><p>ROM patch support files</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>target\</p></td>
<td><p>Board gateway folder</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>devices\</p></td>
<td><p>Support files from driverlib</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>display\</p></td>
<td><p>Display module</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>drivers\</p></td>
<td><p>TI-RTOS drivers source and libraries</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>grlib\</p></td>
<td><p>Graphics library</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>mw\</p></td>
<td><p>Other middleware modules dependent on
TI-RTOS drivers</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="working-with-hex-and-binary-files">
<span id="sec-inc-architecture-working-with-hex-files"></span><h2>Working With Hex and Binary Files<a class="headerlink" href="#working-with-hex-and-binary-files" title="Permalink to this headline">¶</a></h2>
<p>BLE-Stack projects have project build configurations in which the application
and stack projects produce an Intel®-extended hex file in their
respective output folders. These hex files lack overlapping memory regions and
can be programmed individually with a flash programming tool, such as SmartRF
Flash Programmer 2. To simplify the flash programming process, you can combine
the application and stack hex files into a super hex file manually or using
freely available tools.
Information on the <a class="reference external" href="https://en.wikipedia.org/wiki/Intel_HEX">Intel Hex standard</a>.</p>
<p>One example for creating the super hex file is with the IntelHex python script
hex_merge.py, available at <a class="reference external" href="https://launchpad.net/intelhex/+download">IntelHex launchpad</a>.
To merge the hex files, install Python® 2.7.x and add it to your system
path environment variables.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that when using any python script, you must use a compatible version
of Python. Refer to the tool documentation or contact the developer to
verify compatibility.</p>
</div>
<p>The following is an example usage to create a merged
simple_peripheral_cc2640r2lp.hex file consisting of the individual application
and stack hex files:</p>
<div class="highlight-console notranslate" id="lst-hexmerge-script"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="go">C:\Python27\Scripts&gt;python hexmerge.py \</span>
<span class="linenos">2</span><span class="go">    -o .\simple_peripheral_cc2640r2lp_merged.hex \</span>
<span class="linenos">3</span><span class="go">    -r 0000:1FFFF</span>
<span class="linenos">4</span><span class="go">    simple_peripheral_cc2640r2lp_app.hex:0000:1FFFF</span>
<span class="linenos">5</span><span class="go">    simple_peripheral_cc2640r2lp_stack.hex</span>
<span class="linenos">6</span><span class="go">    --overlap=error</span>
</pre></div>
</div>
<p>If conversion of the super hex to binary is desired, this can be accomplished
with the “hex2bin.py” or similar tools that support the hex standard.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="go">C:\Python27\Scripts&gt;python hex2bin.py \</span>
<span class="linenos">2</span><span class="go">    simple_peripheral_cc2640r2lp_merged.hex \</span>
<span class="linenos">3</span><span class="go">    simple_peripheral_cc2640r2lp_merged.bin</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hardware_architecture.html" class="btn btn-neutral float-left" title="Hardware Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="developing_in_ccs.html" class="btn btn-neutral float-right" title="Developing with CCS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2010-2024, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>